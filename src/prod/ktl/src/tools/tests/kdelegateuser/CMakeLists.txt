if (FALSE)
# No .exe was being generated by this build

set (lib_KDelegateUserTests "KDelegateUserTests" CACHE STRING "KDelegateUserTests.so")

set ( SOURCES
    ../KDelegate.cpp
    ../kmuser.cpp
)

add_compile_options(-rdynamic)

add_definitions(-DBOOST_TEST_ENABLED)
add_definitions(-DNO_INLINE_EVENTDESCCREATE)

# share test lib
add_library(objects_kdelegateusertests OBJECT ${SOURCES})
target_include_directories(objects_kdelegateusertests BEFORE PUBLIC "../kdelegate")
add_library(${lib_KDelegateUserTests} SHARED $<TARGET_OBJECTS:objects_kdelegateusertests>)

set_target_properties(${lib_KDelegateUserTests} PROPERTIES
    LIBRARY_OUTPUT_DIRECTORY ${TEST_OUTPUT_DIR})

target_link_libraries(${lib_KDelegateUserTests}
  ${lib_ktlfull}
  ${lib_KmUnitUser}
)

endif(FALSE)
