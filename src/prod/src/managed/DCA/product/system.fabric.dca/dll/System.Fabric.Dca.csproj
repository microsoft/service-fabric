<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="14.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Build">
  <Import Project="$(EnvironmentConfig)" />
  <Import Project="$(SRCROOT)\properties\service_fabric_managed_prod.props" />
  <Import Project="$(SrcRoot)\solutions\EnableStylecop.props" />
  <PropertyGroup>
    <ProjectGuid>{32DDA3E4-9A52-474B-A3DF-9A6D201A38F6}</ProjectGuid>
    <RootNamespace>System.Fabric.Dca</RootNamespace>
    <AssemblyName>System.Fabric.Dca</AssemblyName>
    <AssemblyDescription>Data Collection Agent APIs</AssemblyDescription>
    <OutputType>Library</OutputType>
    <AssemblyClsCompliant>false</AssemblyClsCompliant>
  </PropertyGroup>
  <ItemGroup>
    <Compile Include="..\BootstrapTraceProcessor.cs">
      <Link>BootstrapTraceProcessor.cs</Link>
    </Compile>
    <Compile Include="..\AppActivationTable.cs">
      <Link>AppActivationTable.cs</Link>
    </Compile>
    <Compile Include="..\AppConfig.cs">
      <Link>AppConfig.cs</Link>
    </Compile>
    <Compile Include="..\AppEtwTraceFolders.cs">
      <Link>AppEtwTraceFolders.cs</Link>
    </Compile>
    <Compile Include="..\BufferedEtwEventPerformance.cs">
      <Link>BufferedEtwEventPerformance.cs</Link>
    </Compile>
    <Compile Include="..\BufferedEtwEventProvider.cs">
      <Link>BufferedEtwEventProvider.cs</Link>
    </Compile>
    <Compile Include="..\ConfigReader.cs">
      <Link>ConfigReader.cs</Link>
    </Compile>
    <Compile Include="..\ConsumerProgressManager.cs">
      <Link>ConsumerProgressManager.cs</Link>
    </Compile>
    <Compile Include="..\ContainerEnvironment.cs">
      <Link>ContainerEnvironment.cs</Link>
    </Compile>
    <Compile Include="..\EtlToInMemoryBufferPerformance.cs">
      <Link>EtlToInMemoryBufferPerformance.cs</Link>
    </Compile>
    <Compile Include="..\EtlToInMemoryBufferWriter.cs">
      <Link>EtlToInMemoryBufferWriter.cs</Link>
    </Compile>
    <Compile Include="..\EventIndex.cs">
      <Link>EventIndex.cs</Link>
    </Compile>
    <Compile Include="..\IConfigReader.cs">
      <Link>IConfigReader.cs</Link>
    </Compile>
    <Compile Include="..\DCATimer.cs">
      <Link>DCATimer.cs</Link>
    </Compile>
    <Compile Include="..\DecodedEventWrapper.cs">
      <Link>DecodedEventWrapper.cs</Link>
    </Compile>
    <Compile Include="..\DiskSpaceManager.cs">
      <Link>DiskSpaceManager.cs</Link>
    </Compile>
    <Compile Include="..\IDcaInMemoryConsumer.cs">
      <Link>IDcaInMemoryConsumer.cs</Link>
    </Compile>
    <Compile Include="..\IEtlInMemorySink.cs">
      <Link>IEtlInMemorySink.cs</Link>
    </Compile>
    <Compile Include="..\InMemorySink.cs">
      <Link>InMemorySink.cs</Link>
    </Compile>
    <Compile Include="..\ServiceEtwManifestInfo.cs">
      <Link>ServiceEtwManifestInfo.cs</Link>
    </Compile>
    <Compile Include="..\ITraceEventSourceFactory.cs">
      <Link>ITraceEventSourceFactory.cs</Link>
    </Compile>
    <Compile Include="..\TraceEventSourceFactory.cs">
      <Link>TraceEventSourceFactory.cs</Link>
    </Compile>
    <Compile Include="..\EtlToCsvFileWriterConfigReader.cs">
      <Link>EtlToCsvFileWriterConfigReader.cs</Link>
    </Compile>
    <Compile Include="..\IEtlToCsvFileWriterConfigReader.cs">
      <Link>IEtlToCsvFileWriterConfigReader.cs</Link>
    </Compile>
    <Compile Include="..\WinFabricEtlType.cs">
      <Link>WinFabricEtlType.cs</Link>
    </Compile>
    <Compile Include="_friends.cs" />
    <Compile Include="..\DecodedEtwEvent.cs">
      <Link>DecodedEtwEvent.cs</Link>
    </Compile>
    <Compile Include="..\ProducerInitializationParameters.cs">
      <Link>ProducerInitializationParameters.cs</Link>
    </Compile>
    <Compile Include="..\ConsumerInitializationParameters.cs">
      <Link>ConsumerInitializationParameters.cs</Link>
    </Compile>
    <Compile Include="..\EtlConsumerConstants.cs">
      <Link>EtlConsumerConstants.cs</Link>
    </Compile>
    <Compile Include="..\EtlToCsvFileWriter.cs">
      <Link>EtlToCsvFileWriter.cs</Link>
    </Compile>
    <Compile Include="..\EtlToCsvPerformance.cs">
      <Link>EtlToCsvPerformance.cs</Link>
    </Compile>
    <Compile Include="..\EtwTraceFilter.cs">
      <Link>EtwTraceFilter.cs</Link>
    </Compile>
    <Compile Include="..\EventProcessor.cs">
      <Link>EventProcessor.cs</Link>
    </Compile>
    <Compile Include="..\Exceptions\ConfigurationException.cs">
      <Link>Exceptions\ConfigurationException.cs</Link>
    </Compile>
    <Compile Include="..\ExternalOperationTime.cs">
      <Link>ExternalOperationTime.cs</Link>
    </Compile>
    <Compile Include="..\FileCompressor.cs">
      <Link>FileCompressor.cs</Link>
    </Compile>
    <Compile Include="..\FileUploaderBase.cs">
      <Link>FileUploaderBase.cs</Link>
    </Compile>
    <Compile Include="..\FileUploaderBasePerformance.cs">
      <Link>FileUploaderBasePerformance.cs</Link>
    </Compile>
    <Compile Include="..\FolderTrimmer.cs">
      <Link>FolderTrimmer.cs</Link>
    </Compile>
    <Compile Include="..\IBufferedEtwEventProvider.cs">
      <Link>IBufferedEtwEventProvider.cs</Link>
    </Compile>
    <Compile Include="..\IBufferedEtwEventSink.cs">
      <Link>IBufferedEtwEventSink.cs</Link>
    </Compile>
    <Compile Include="..\IDcaConsumer.cs">
      <Link>IDcaConsumer.cs</Link>
    </Compile>
    <Compile Include="..\IDcaProducer.cs">
      <Link>IDcaProducer.cs</Link>
    </Compile>
    <Compile Include="..\IEtlFileSink.cs">
      <Link>IEtlFileSink.cs</Link>
    </Compile>
    <Compile Include="..\IEtlProducer.cs">
      <Link>IEtlProducer.cs</Link>
    </Compile>
    <Compile Include="..\ITraceOutputWriter.cs">
      <Link>ITraceOutputWriter.cs</Link>
    </Compile>
    <Compile Include="..\IEtwSink.cs">
      <Link>IEtwSink.cs</Link>
    </Compile>
    <Compile Include="..\IFolderSink.cs">
      <Link>IFolderSink.cs</Link>
    </Compile>
    <Compile Include="..\InternalFileSink.cs">
      <Link>InternalFileSink.cs</Link>
    </Compile>
    <Compile Include="..\IPerformanceCounterConfigurationSink.cs">
      <Link>IPerformanceCounterConfigurationSink.cs</Link>
    </Compile>
    <Compile Include="..\LocalMapTrimmingHelper.cs">
      <Link>LocalMapTrimmingHelper.cs</Link>
    </Compile>
    <Compile Include="..\PerformanceCounterCommon.cs">
      <Link>PerformanceCounterCommon.cs</Link>
    </Compile>
    <Compile Include="..\PersistedIndex.cs">
      <Link>PersistedIndex.cs</Link>
    </Compile>
    <Compile Include="..\HealthClient.cs">
      <Link>HealthClient.cs</Link>
    </Compile>
    <Compile Include="..\RetriableOperationExceptionHandler.cs">
      <Link>RetriableOperationExceptionHandler.cs</Link>
    </Compile>
    <Compile Include="..\ServiceConfig.cs">
      <Link>ServiceConfig.cs</Link>
    </Compile>
    <Compile Include="..\StandardPluginTypes.cs">
      <Link>StandardPluginTypes.cs</Link>
    </Compile>
    <Compile Include="..\SystemTimer.cs">
      <Link>SystemTimer.cs</Link>
    </Compile>
    <Compile Include="..\UnhandledExceptionHandler.cs">
      <Link>UnhandledExceptionHandler.cs</Link>
    </Compile>
    <Compile Include="..\Utility.cs">
      <Link>Utility.cs</Link>
    </Compile>
    <Compile Include="..\WinFabDefaultFilter.cs">
      <Link>WinFabDefaultFilter.cs</Link>
    </Compile>
    <Compile Include="..\WinFabFilter.cs">
      <Link>WinFabFilter.cs</Link>
    </Compile>
    <Compile Include="..\WinFabSummaryFilter.cs">
      <Link>WinFabSummaryFilter.cs</Link>
    </Compile>
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\..\..\..\EtlReader\EtlReader.csproj">
      <Project>{54BBF6D7-BAF6-489E-972F-5EB83C793E1D}</Project>
      <Name>EtlReader</Name>
    </ProjectReference>
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <ProjectReference Include="..\..\..\..\Api\Dlls\System.Fabric\System.Fabric.csproj">
      <Project>{65905332-C075-40A4-99DD-71800412191C}</Project>
      <Name>System.Fabric</Name>
    </ProjectReference>
    <ProjectReference Include="..\..\..\..\Api\Dlls\System.Fabric.Strings\System.Fabric.Strings.csproj">
      <Project>{FC4947D4-A39D-47EB-A3E2-445510FFC430}</Project>
      <Name>system.fabric.strings</Name>
    </ProjectReference>
    <Reference Include="System.Xml" />
  </ItemGroup>
  <Import Project="$(ExtendedTargetsPath)\Microsoft.CSharp.targets" />
  <Target Name="AfterBuild">
    <ItemGroup>
      <BinplaceFiles Include="$(OutputPath)**\*" Exclude="$(OutputPath)**\*.pdb;$(OutputPath)**\*.lib" />
      <SymbolFiles Include="$(OutputPath)**\*.pdb" />
    </ItemGroup>
    <Copy SourceFiles="@(BinplaceFiles)" DestinationFolder="$(BinariesBuildTypeArchDirectory)\bin\" SkipUnchangedFiles="true" />
    <Copy SourceFiles="@(BinplaceFiles)" DestinationFolder="$(BinariesBuildTypeArchDirectory)\bin\FabricUnitTests\" SkipUnchangedFiles="true" />
    <Copy SourceFiles="@(SymbolFiles)" DestinationFolder="$(BinariesBuildTypeArchDirectory)\symbols\" SkipUnchangedFiles="true" />
  </Target>
</Project>